{"version":3,"file":"commonHelpers2.js","sources":["../src/js/2-form.js"],"sourcesContent":["import debounce from 'lodash.debounce';\n\nconst STORAGE_KEY = 'feedback-form-state';\n\nconst savedFormData = JSON.parse(localStorage.getItem(STORAGE_KEY));\n\nlet formData = {\n  email: '',\n  message: '',\n  ...savedFormData,\n};\n\nconst refs = {\n  feedbackForm: document.querySelector('.js-feedback-form'),\n};\n\nrefs.feedbackForm.addEventListener('submit', onFormSubmit);\nrefs.feedbackForm.addEventListener('input', debounce(onFormInput, 250));\n\nif (savedFormData) {\n  const keys = Object.keys(savedFormData);\n\n  for (const key of keys) {\n    refs.feedbackForm.elements[key].value = savedFormData[key];\n  }\n}\n\nfunction onFormInput(evt) {\n  formData[evt.target.name] = evt.target.value.trim();\n\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(formData));\n}\n\nfunction onFormSubmit(evt) {\n  if (\n    evt.currentTarget.elements.email.value.trim() === '' ||\n    evt.currentTarget.elements.message.value.trim() === ''\n  ) {\n    alert('Fill please all fields');\n    return;\n  }\n\n  console.log('formData', formData);\n\n  evt.preventDefault();\n  evt.currentTarget.reset();\n\n  localStorage.removeItem(STORAGE_KEY);\n\n  clearFormData();\n}\n\nfunction clearFormData() {\n  const keys = Object.keys(formData);\n\n  for (const key of keys) {\n    formData[key] = '';\n  }\n}\n"],"names":["STORAGE_KEY","savedFormData","formData","refs","onFormSubmit","debounce","onFormInput","keys","key","evt","clearFormData"],"mappings":"oGAEA,MAAMA,EAAc,sBAEdC,EAAgB,KAAK,MAAM,aAAa,QAAQD,CAAW,CAAC,EAElE,IAAIE,EAAW,CACb,MAAO,GACP,QAAS,GACT,GAAGD,CACL,EAEA,MAAME,EAAO,CACX,aAAc,SAAS,cAAc,mBAAmB,CAC1D,EAEAA,EAAK,aAAa,iBAAiB,SAAUC,CAAY,EACzDD,EAAK,aAAa,iBAAiB,QAASE,EAASC,EAAa,GAAG,CAAC,EAEtE,GAAIL,EAAe,CACjB,MAAMM,EAAO,OAAO,KAAKN,CAAa,EAEtC,UAAWO,KAAOD,EAChBJ,EAAK,aAAa,SAASK,CAAG,EAAE,MAAQP,EAAcO,CAAG,CAE7D,CAEA,SAASF,EAAYG,EAAK,CACxBP,EAASO,EAAI,OAAO,IAAI,EAAIA,EAAI,OAAO,MAAM,OAE7C,aAAa,QAAQT,EAAa,KAAK,UAAUE,CAAQ,CAAC,CAC5D,CAEA,SAASE,EAAaK,EAAK,CACzB,GACEA,EAAI,cAAc,SAAS,MAAM,MAAM,KAAI,IAAO,IAClDA,EAAI,cAAc,SAAS,QAAQ,MAAM,KAAI,IAAO,GACpD,CACA,MAAM,wBAAwB,EAC9B,MACD,CAED,QAAQ,IAAI,WAAYP,CAAQ,EAEhCO,EAAI,eAAc,EAClBA,EAAI,cAAc,QAElB,aAAa,WAAWT,CAAW,EAEnCU,GACF,CAEA,SAASA,GAAgB,CACvB,MAAMH,EAAO,OAAO,KAAKL,CAAQ,EAEjC,UAAWM,KAAOD,EAChBL,EAASM,CAAG,EAAI,EAEpB"}